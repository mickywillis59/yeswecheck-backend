<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YesWeCheck API Tester</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family:  'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:  linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .header p {
      opacity: 0.9;
      font-size: 1.1em;
    }

    .tabs {
      display: flex;
      background: #f5f5f5;
      border-bottom: 2px solid #ddd;
      overflow-x: auto;
    }

    .tab {
      padding: 15px 25px;
      cursor: pointer;
      border: none;
      background: transparent;
      font-size: 1em;
      color: #666;
      border-bottom: 3px solid transparent;
      transition:  all 0.3s;
      white-space: nowrap;
    }

    .tab:hover {
      background: #e0e0e0;
    }

    .tab.active {
      color: #667eea;
      border-bottom-color: #667eea;
      background: white;
      font-weight: bold;
    }

    .content {
      padding: 30px;
    }

    .api-section {
      display: none;
    }

    .api-section.active {
      display: block;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight:  600;
      color: #333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1em;
      transition: border-color 0.3s;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    .form-group textarea {
      font-family: monospace;
      min-height:  100px;
      resize:  vertical;
    }

    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      font-weight: 600;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .examples {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .example-btn {
      padding: 8px 15px;
      background: #f0f0f0;
      border: 1px solid #ddd;
      border-radius:  6px;
      cursor:  pointer;
      font-size:  0.9em;
      transition: all 0.2s;
    }

    .example-btn:hover {
      background: #e0e0e0;
      border-color: #667eea;
    }

    .result-container {
      margin-top: 30px;
      display: none;
    }

    .result-container.show {
      display: block;
    }

    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .result-header h3 {
      color: #333;
    }

    .status-badge {
      padding: 6px 15px;
      border-radius:  20px;
      font-weight: 600;
      font-size: 0.9em;
    }

    .status-success {
      background: #4caf50;
      color: white;
    }

    .status-error {
      background: #f44336;
      color: white;
    }

    .status-warning {
      background: #ff9800;
      color: white;
    }

    .result-box {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius:  8px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      font-size: 0.95em;
      line-height: 1.6;
      max-height: 600px;
      overflow-y:  auto;
    }

    .json-key {
      color: #9cdcfe;
    }

    .json-string {
      color: #ce9178;
    }

    .json-number {
      color: #b5cea8;
    }

    .json-boolean {
      color: #569cd6;
    }

    .json-null {
      color: #569cd6;
    }

    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding:  15px;
      margin-bottom: 20px;
      border-radius: 4px;
    }

    .info-box h4 {
      color: #1976d2;
      margin-bottom: 8px;
    }

    .info-box p {
      color: #555;
      line-height: 1.6;
    }

    .grid-2 {
      display: grid;
      grid-template-columns:  1fr 1fr;
      gap: 15px;
    }

    @media (max-width: 768px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }

      .header h1 {
        font-size: 1.8em;
      }

      .tabs {
        flex-wrap: wrap;
      }
    }

    .copy-btn {
      background: #4caf50;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius:  6px;
      cursor: pointer;
      font-size: 0.9em;
      transition: background 0.3s;
    }

    .copy-btn:hover {
      background: #45a049;
    }

    .highlight-box {
      background: #fffbf0;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 4px;
    }

    .highlight-box h4 {
      color:  #f57c00;
      margin-bottom: 8px;
    }

    .highlight-box p {
      color: #555;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üöÄ YesWeCheck API Tester</h1>
      <p>Test all your email validation APIs in one place</p>
    </div>

    <div class="tabs">
      <button class="tab active" onclick="switchTab('validate')">üìß Email Validation</button>
      <button class="tab" onclick="switchTab('firstname')">üë§ Firstname Enrichment</button>
      <button class="tab" onclick="switchTab('profanity')">ü§¨ Profanity Check</button>
      <button class="tab" onclick="switchTab('disposable')">üóëÔ∏è Disposable Check</button>
      <button class="tab" onclick="switchTab('role')">üëî Role Account</button>
      <button class="tab" onclick="switchTab('dns')">üåê DNS Validation</button>
      <button class="tab" onclick="switchTab('syntax')">‚úÖ Syntax Check</button>
    </div>

    <div class="content">
      <!-- Email Validation -->
      <div id="validate" class="api-section active">
        <div class="info-box">
          <h4>üìß Complete Email Validation</h4>
          <p>Full validation pipeline including syntax, DNS, profanity, disposable domains, role accounts, and more.</p>
        </div>

        <div class="examples">
          <button class="example-btn" onclick="setEmail('validate', 'john. doe@gmail.com')">‚úÖ Valid Email</button>
          <button class="example-btn" onclick="setEmail('validate', 'fuck@gmail.com')">ü§¨ Profanity</button>
          <button class="example-btn" onclick="setEmail('validate', 'test@tempmail.com')">üóëÔ∏è Disposable</button>
          <button class="example-btn" onclick="setEmail('validate', 'contact@company.com')">üë§ Role Account</button>
          <button class="example-btn" onclick="setEmail('validate', 'invalid@nonexistentdomain9999.com')">‚ùå Invalid DNS</button>
        </div>

        <div class="form-group">
          <label for="email-validate">Email Address</label>
          <input type="email" id="email-validate" placeholder="john.doe@example.com" value="john.doe@gmail.com">
        </div>

        <button class="btn" onclick="callAPI('validate')">
          <span class="btn-text">Validate Email</span>
        </button>

        <div id="result-validate" class="result-container"></div>
      </div>

      <!-- Firstname Enrichment -->
      <div id="firstname" class="api-section">
        <div class="highlight-box">
          <h4>üë§ Firstname Enrichment & Gender Detection</h4>
          <p>Extract firstname from email, detect gender (M/F), estimate age based on INSEE birth data (31k+ French firstnames), and distinguish between real names vs surnames (AMBIGUOUS/LASTNAME_ONLY detection).</p>
        </div>

        <div class="info-box">
          <h4>üéØ Features</h4>
          <p>
            ‚úÖ <strong>Firstname extraction</strong> with confidence score (0-100)<br>
            ‚úÖ <strong>Gender detection</strong> (M./Mme) with 85%+ confidence threshold<br>
            ‚úÖ <strong>Age estimation</strong> (P25/P50/P75 quartiles) from INSEE birth years<br>
            ‚úÖ <strong>LASTNAME_ONLY</strong> detection (dupont, martin as surname ‚Üí score 1)<br>
            ‚úÖ <strong>AMBIGUOUS</strong> detection (martin, thomas, gabriel ‚Üí preserved scores)<br>
            ‚úÖ <strong>Peak decade</strong> identification (1950s, 1990s, 2010s, etc.)
          </p>
        </div>

        <div class="examples">
          <button class="example-btn" onclick="setEmail('firstname', 'jean.dupont@gmail.com')">‚úÖ Jean (M, 70 ans)</button>
          <button class="example-btn" onclick="setEmail('firstname', 'marie.martin@gmail.com')">‚úÖ Marie (F, 68 ans)</button>
          <button class="example-btn" onclick="setEmail('firstname', 'emma.dubois@gmail.com')">‚úÖ Emma (F, 12 ans)</button>
          <button class="example-btn" onclick="setEmail('firstname', 'gabriel.dupont@gmail.com')">‚ö†Ô∏è Gabriel (AMBIGUOUS)</button>
          <button class="example-btn" onclick="setEmail('firstname', 'dupont.martin@gmail.com')">‚ö†Ô∏è Martin (LASTNAME_ONLY)</button>
          <button class="example-btn" onclick="setEmail('firstname', 'thomas.leroy@gmail.com')">‚ö†Ô∏è Thomas (AMBIGUOUS high)</button>
        </div>

        <div class="form-group">
          <label for="email-firstname">Email Address</label>
          <input type="email" id="email-firstname" placeholder="jean.dupont@example.com" value="jean.dupont@gmail.com">
        </div>

        <button class="btn" onclick="callAPI('firstname')">
          <span class="btn-text">Enrich Firstname</span>
        </button>

        <div id="result-firstname" class="result-container"></div>
      </div>

      <!-- Profanity Check -->
      <div id="profanity" class="api-section">
        <div class="info-box">
          <h4>ü§¨ Profanity Detection</h4>
          <p>Check if an email contains inappropriate language.  Detects leetspeak (sh1t ‚Üí shit) and special characters (f*ck ‚Üí fuck).</p>
        </div>

        <div class="examples">
          <button class="example-btn" onclick="setEmail('profanity', 'john.doe@gmail.com')">‚úÖ Clean</button>
          <button class="example-btn" onclick="setEmail('profanity', 'fuck@test.com')">High Severity</button>
          <button class="example-btn" onclick="setEmail('profanity', 'sh1thead@test.com')">Leetspeak</button>
          <button class="example-btn" onclick="setEmail('profanity', 'connard123@test.fr')">French</button>
          <button class="example-btn" onclick="setEmail('profanity', 'f*ck. off@test.com')">Special Chars</button>
        </div>

        <div class="form-group">
          <label for="email-profanity">Email Address</label>
          <input type="email" id="email-profanity" placeholder="test@example.com" value="john.doe@gmail.com">
        </div>

        <button class="btn" onclick="callAPI('profanity')">
          <span class="btn-text">Check Profanity</span>
        </button>

        <div id="result-profanity" class="result-container"></div>
      </div>

      <!-- Disposable Check -->
      <div id="disposable" class="api-section">
        <div class="info-box">
          <h4>üóëÔ∏è Disposable Email Detection</h4>
          <p>Check if an email uses a temporary/disposable domain. Database of 55,000+ known providers.</p>
        </div>

        <div class="examples">
          <button class="example-btn" onclick="setEmail('disposable', 'john@gmail.com')">‚úÖ Valid</button>
          <button class="example-btn" onclick="setEmail('disposable', 'test@tempmail.com')">TempMail</button>
          <button class="example-btn" onclick="setEmail('disposable', 'user@guerrillamail.com')">GuerrillaMail</button>
          <button class="example-btn" onclick="setEmail('disposable', 'hello@10minutemail.com')">10MinuteMail</button>
          <button class="example-btn" onclick="setEmail('disposable', 'test@mailinator.com')">Mailinator</button>
        </div>

        <div class="form-group">
          <label for="email-disposable">Email Address</label>
          <input type="email" id="email-disposable" placeholder="test@example.com" value="john@gmail.com">
        </div>

        <button class="btn" onclick="callAPI('disposable')">
          <span class="btn-text">Check Disposable</span>
        </button>

        <div id="result-disposable" class="result-container"></div>
      </div>

      <!-- Role Account -->
      <div id="role" class="api-section">
        <div class="info-box">
          <h4>üëî Role Account Detection</h4>
          <p>Detect generic role-based email addresses (info@, contact@, admin@, support@, etc.).</p>
        </div>

        <div class="examples">
          <button class="example-btn" onclick="setEmail('role', 'john.doe@company.com')">‚úÖ Personal</button>
          <button class="example-btn" onclick="setEmail('role', 'contact@company.com')">contact@</button>
          <button class="example-btn" onclick="setEmail('role', 'info@company.com')">info@</button>
          <button class="example-btn" onclick="setEmail('role', 'admin@company.com')">admin@</button>
          <button class="example-btn" onclick="setEmail('role', 'support@company.com')">support@</button>
        </div>

        <div class="form-group">
          <label for="email-role">Email Address</label>
          <input type="email" id="email-role" placeholder="test@example.com" value="john.doe@company.com">
        </div>

        <button class="btn" onclick="callAPI('role')">
          <span class="btn-text">Check Role Account</span>
        </button>

        <div id="result-role" class="result-container"></div>
      </div>

      <!-- DNS Validation -->
      <div id="dns" class="api-section">
        <div class="info-box">
          <h4>üåê DNS/MX Record Validation</h4>
          <p>Verify that the email domain has valid MX records and can receive emails.</p>
        </div>

        <div class="examples">
          <button class="example-btn" onclick="setEmail('dns', 'test@gmail.com')">‚úÖ Gmail</button>
          <button class="example-btn" onclick="setEmail('dns', 'test@yahoo.com')">‚úÖ Yahoo</button>
          <button class="example-btn" onclick="setEmail('dns', 'test@outlook.com')">‚úÖ Outlook</button>
          <button class="example-btn" onclick="setEmail('dns', 'test@nonexistent9999.com')">‚ùå Invalid</button>
        </div>

        <div class="form-group">
          <label for="email-dns">Email Address</label>
          <input type="email" id="email-dns" placeholder="test@example.com" value="test@gmail.com">
        </div>

        <button class="btn" onclick="callAPI('dns')">
          <span class="btn-text">Validate DNS</span>
        </button>

        <div id="result-dns" class="result-container"></div>
      </div>

      <!-- Syntax Check -->
      <div id="syntax" class="api-section">
        <div class="info-box">
          <h4>‚úÖ Syntax Validation</h4>
          <p>Basic email syntax validation according to RFC standards. </p>
        </div>

        <div class="examples">
          <button class="example-btn" onclick="setEmail('syntax', 'valid@email.com')">‚úÖ Valid</button>
          <button class="example-btn" onclick="setEmail('syntax', 'invalid. email')">‚ùå No @</button>
          <button class="example-btn" onclick="setEmail('syntax', '@nodomain.com')">‚ùå No local</button>
          <button class="example-btn" onclick="setEmail('syntax', 'space @email.com')">‚ùå Space</button>
          <button class="example-btn" onclick="setEmail('syntax', 'double@@email.com')">‚ùå Double @</button>
        </div>

        <div class="form-group">
          <label for="email-syntax">Email Address</label>
          <input type="email" id="email-syntax" placeholder="test@example.com" value="valid@email.com">
        </div>

        <button class="btn" onclick="callAPI('syntax')">
          <span class="btn-text">Check Syntax</span>
        </button>

        <div id="result-syntax" class="result-container"></div>
      </div>
    </div>
  </div>

  <script>
    const API_BASE = 'https://email. yeswecheck.fr/api/v1';

    const API_ENDPOINTS = {
      validate: {
        url: '/validate',
        method: 'POST',
        body: (email) => ({ email })
      },
      firstname: {
        url: '/firstname-enrichment/enrich',
        method: 'POST',
        body: (email) => ({ email })
      },
      profanity: {
        url: '/profanity/check',
        method: 'POST',
        body: (email) => ({ email })
      },
      disposable: {
        url: '/disposable-email/check',
        method: 'POST',
        body: (email) => ({ email })
      },
      role: {
        url: '/role-account/check',
        method: 'POST',
        body: (email) => ({ email })
      },
      dns: {
        url:  '/validate/dns',
        method: 'POST',
        body: (email) => ({ email })
      },
      syntax: {
        url: '/validate/syntax',
        method: 'POST',
        body: (email) => ({ email })
      }
    };

    function switchTab(tabName) {
      // Update tabs
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');

      // Update sections
      document.querySelectorAll('.api-section').forEach(section => section.classList.remove('active'));
      document.getElementById(tabName).classList.add('active');
    }

    function setEmail(section, email) {
      document.getElementById(`email-${section}`).value = email;
    }

    async function callAPI(apiName) {
      const email = document.getElementById(`email-${apiName}`).value;
      const resultContainer = document.getElementById(`result-${apiName}`);
      const btn = event.target. closest('.btn');
      const btnText = btn.querySelector('.btn-text');

      if (!email) {
        alert('Please enter an email address');
        return;
      }

      // Show loading
      btn.disabled = true;
      btnText.innerHTML = '<span class="loading"></span> Loading...';

      const endpoint = API_ENDPOINTS[apiName];
      const url = API_BASE + endpoint.url;

      try {
        const startTime = Date.now();
        const response = await fetch(url, {
          method: endpoint.method,
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(endpoint.body(email))
        });

        const executionTime = Date.now() - startTime;
        const data = await response.json();

        // Add execution time if not already present
        if (!data. executionTime) {
          data._executionTime = executionTime + 'ms';
        }

        displayResult(resultContainer, data, response. ok);
      } catch (error) {
        displayResult(resultContainer, {
          error: error.message,
          details: 'Failed to connect to API.  Make sure the server is running at https://email.yeswecheck.fr'
        }, false);
      } finally {
        btn.disabled = false;
        btnText.textContent = getButtonText(apiName);
      }
    }

    function getButtonText(apiName) {
      const texts = {
        validate: 'Validate Email',
        firstname:  'Enrich Firstname',
        profanity: 'Check Profanity',
        disposable: 'Check Disposable',
        role: 'Check Role Account',
        dns:  'Validate DNS',
        syntax: 'Check Syntax'
      };
      return texts[apiName] || 'Submit';
    }

    function displayResult(container, data, isSuccess) {
      const status = getStatus(data, isSuccess);
      const formattedJSON = syntaxHighlight(JSON.stringify(data, null, 2));

      container.innerHTML = `
        <div class="result-header">
          <h3>üìä Result</h3>
          <div>
            <span class="status-badge ${status.class}">${status. text}</span>
            <button class="copy-btn" onclick="copyResult(this)" style="margin-left: 10px;">üìã Copy JSON</button>
          </div>
        </div>
        <div class="result-box">${formattedJSON}</div>
      `;

      container.classList.add('show');
      container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function getStatus(data, isSuccess) {
      if (! isSuccess) {
        return { class: 'status-error', text: '‚ùå Error' };
      }

      // Firstname enrichment success
      if (data.firstName && data.firstNameConfidence >= 70) {
        return { class: 'status-success', text: '‚úÖ Success' };
      }

      if (data.isValid === false || data.hasProfanity === true || data.isDisposable === true) {
        return { class: 'status-error', text: '‚ùå Failed' };
      }

      if (data.score && data.score < 70) {
        return { class:  'status-warning', text: '‚ö†Ô∏è Warning' };
      }

      if (data.isRole === true) {
        return { class: 'status-warning', text: '‚ö†Ô∏è Role Account' };
      }

      return { class: 'status-success', text: '‚úÖ Success' };
    }

    function syntaxHighlight(json) {
      json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
      return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
        let cls = 'json-number';
        if (/^"/.test(match)) {
          if (/:  $/.test(match)) {
            cls = 'json-key';
          } else {
            cls = 'json-string';
          }
        } else if (/true|false/.test(match)) {
          cls = 'json-boolean';
        } else if (/null/.test(match)) {
          cls = 'json-null';
        }
        return '<span class="' + cls + '">' + match + '</span>';
      });
    }

    function copyResult(btn) {
      const resultBox = btn.closest('.result-container').querySelector('.result-box');
      const text = resultBox.innerText;

      navigator.clipboard.writeText(text).then(() => {
        const originalText = btn.textContent;
        btn. textContent = '‚úÖ Copied!';
        btn.style.background = '#4caf50';

        setTimeout(() => {
          btn.textContent = originalText;
          btn.style.background = '';
        }, 2000);
      });
    }
  </script>
</body>
</html>
